@model Presentation.ViewModels.Checkout.CheckoutViewModel
@{
    ViewData["Title"] = "Checkout";
}

<div class="container py-4">
    <h1 class="mb-4">Checkout</h1>
    <form asp-action="PlaceOrder" method="post">
        <div class="row">
            <div class="col-md-8">
                <div class="card mb-4">
                    <div class="card-header">Shipping Details</div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label asp-for="ShippingAddress" class="form-label"></label>
                            <textarea asp-for="ShippingAddress" class="form-control" rows="3"></textarea>
                            <span asp-validation-for="ShippingAddress" class="text-danger"></span>
                        </div>
                        <div class="mb-3">
                            <label asp-for="PhoneNumber" class="form-label"></label>
                            <input asp-for="PhoneNumber" class="form-control" placeholder="03XX-XXXXXXX" />
                            <span asp-validation-for="PhoneNumber" class="text-danger"></span>
                        </div>
                        <div class="mb-3">
                            <label asp-for="PreferredDeliveryTime" class="form-label"></label>
                            <select asp-for="PreferredDeliveryTime" class="form-select">
                                <option value="">Any time</option>
                                <option value="Morning 9 AM - 12 PM">Morning 9 AM - 12 PM</option>
                                <option value="Afternoon 12 PM - 5 PM">Afternoon 12 PM - 5 PM</option>
                                <option value="Evening 5 PM - 9 PM">Evening 5 PM - 9 PM</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label asp-for="City" class="form-label"></label>
                            <input asp-for="City" class="form-control" readonly value="Karachi" />
                            <span asp-validation-for="City" class="text-danger"></span>
                            <small class="text-muted">We currently deliver only to Karachi.</small>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card mb-3">
                    <div class="card-header bg-light">Payment</div>
                    <div class="card-body">
                        <p class="mb-0"><i class="bi bi-cash-stack text-success me-2"></i>Cash on Delivery (Pay when you receive)</p>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">Order Summary</div>
                    <div class="card-body">
                        <ul class="list-unstyled">
                            @foreach (var item in Model.CartItems)
                            {
                                <li class="d-flex justify-content-between mb-2">
                                    <span>@item.ProductName x @item.Quantity</span>
                                    <span>Rs @((item.Quantity * item.Price).ToString("N0"))</span>
                                </li>
                            }
                        </ul>
                        <hr />
                        <div class="d-flex justify-content-between fw-bold">
                            <span>Total</span>
                            <span>Rs @Model.TotalAmount.ToString("N0")</span>
                        </div>
                        <button type="submit" class="btn btn-shopwala w-100 mt-3">Place Order</button>
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
